<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout - Millenium Moto Peças</title>
    <link rel="stylesheet" href="style.css">

    <div class="logo-container">
    <img src="Logo.jpeg" alt="Logo">
	</div>
    <h1>Millenium Moto Peças</h1>


    <style>
        .checkout-container {
            width: 90%;
            max-width: 600px;
            margin: 25px auto;
            background: #fff;
            padding: 20px;
            border-radius: 14px;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.12);
        }

        .produto-imagem {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 2px solid #ddd;
        }

        .titulo {
            font-size: 20px;
            font-weight: bold;
            color: #0b9b4a;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 12px;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #999;
            margin-top: 5px;
        }

        #buscarCepBtn {
            background: #0b9b4a;
            color: #fff;
            padding: 10px 12px;
            border: none;
            border-radius: 8px;
            margin-top: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 15px;
            font-weight: bold;
            box-shadow: 0 0 8px rgba(0,0,0,0.25);
        }

        #buscarCepBtn:hover {
            background: #087a3b;
        }

        button.finalizar {
            background: #0b9b4a;
            color: #fff;
            padding: 12px;
            width: 100%;
            border: none;
            margin-top: 15px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.22);
        }
    </style>
</head>

<body>

    <div class="checkout-container">

        <!-- IMAGEM DO PRODUTO SELECIONADO -->
        <img id="imagemProduto" class="produto-imagem" src="" alt="Imagem do Produto">

        <div class="titulo">Produto Selecionado</div>

        <p id="produtoNome"><b>Produto:</b> </p>
        <p id="produtoPreco"><b>Preço:</b> </p>

        <hr><br>

        <div class="titulo">Endereço de Entrega</div>

        <!-- CEP -->
        <div class="form-group">
            <label>CEP</label>
            <input type="text" id="cep" placeholder="00000-000" maxlength="9">
            <button id="buscarCepBtn">Buscar CEP</button>
        </div>

        <!-- RUA (agora editável) -->
        <div class="form-group">
            <label>Rua</label>
            <input type="text" id="rua" placeholder="Digite a rua">
        </div>

        <!-- NUMERO (S/N permitido) -->
        <div class="form-group">
            <label>Número</label>
            <input type="text" id="numero" placeholder="Ex: 123 ou S/N">
        </div>

        <!-- BAIRRO (agora editável) -->
        <div class="form-group">
            <label>Bairro</label>
            <input type="text" id="bairro" placeholder="Digite o bairro">
        </div>

        <div class="form-group">
            <label>Cidade</label>
            <input type="text" id="cidade" readonly>
        </div>

        <div class="form-group">
            <label>Estado</label>
            <input type="text" id="estado" readonly>
        </div>

        <button class="finalizar" onclick="finalizarCompra()">Finalizar Compra</button>

    </div>

    <script>
        // Carregar produto da página anterior
        document.addEventListener("DOMContentLoaded", () => {
            const produto = JSON.parse(localStorage.getItem("produtoSelecionado"));

            if (produto) {
                document.getElementById("produtoNome").innerHTML = "<b>Produto:</b> " + produto.nome;
                document.getElementById("produtoPreco").innerHTML = "<b>Preço:</b> R$ " + produto.preco;
                document.getElementById("imagemProduto").src = produto.imagem;
            }
        });

        // Buscar CEP
        document.getElementById("buscarCepBtn").addEventListener("click", async () => {
            const cep = document.getElementById("cep").value.replace("-", "");

            if (cep.length !== 8) {
                alert("CEP inválido!");
                return;
            }

            const url = `https://viacep.com.br/ws/${cep}/json/`;

            const response = await fetch(url);
            const data = await response.json();

            if (data.erro) {
                alert("CEP não encontrado.");
                return;
            }

            document.getElementById("rua").value = data.logradouro;
            document.getElementById("bairro").value = data.bairro;
            document.getElementById("cidade").value = data.localidade;
            document.getElementById("estado").value = data.uf;
        });

        // Finalizar compra
        function finalizarCompra() {
            const numero = document.getElementById("numero").value;

            if (numero.trim() === "") {
                alert("Preencha o número ou escreva S/N.");
                return;
            }

            alert("Compra finalizada!");
        }
    </script>

</body>
</html>


